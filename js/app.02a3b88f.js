(function(t){function e(e){for(var i,n,h=e[0],c=e[1],l=e[2],d=0,u=[];d<h.length;d++)n=h[d],o[n]&&u.push(o[n][0]),o[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);a&&a(e);while(u.length)u.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,h=1;h<s.length;h++){var c=s[h];0!==o[c]&&(i=!1)}i&&(r.splice(e--,1),t=n(n.s=s[0]))}return t}var i={},o={app:0},r=[];function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/breakout/";var h=window["webpackJsonp"]=window["webpackJsonp"]||[],c=h.push.bind(h);h.push=e,h=h.slice();for(var l=0;l<h.length;l++)e(h[l]);var a=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"034f":function(t,e,s){"use strict";var i=s("64a9"),o=s.n(i);o.a},"64a9":function(t,e,s){},7206:function(t,e,s){},cd49:function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Game")],1)},r=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"root",staticClass:"root"}),s("p",[s("button",{on:{click:t.pause}},[t._v("Pause / Resume")])])])},h=[],c=s("66cb"),l=s.n(c);const a=3,d="#00796B",u=l()(d).lighten().toHex8String(),p=l()(d).darken().toHex8String();class g{constructor(t){this.brick=t,this.drawn=!1}render(t){this.brick.destroyed||this.drawn?this.brick.destroyed&&this.drawn&&(this.clear(t),this.drawn=!1):(this.draw(t),this.drawn=!0)}draw(t){const e=this.brick.physics.rectangle,s=e.corners.topLeft,i=s.x,o=s.y,r=e.width,n=e.height;t.fillStyle=p,t.fillRect(i,o,r,n),t.fillStyle=d,t.fillRect(i+a,o+a,r-2*a,n-2*a),t.fillStyle=u,t.beginPath(),t.moveTo(i,o),t.lineTo(i+r,o),t.lineTo(i+r-a,o+a),t.lineTo(i+a,o+a),t.lineTo(i+a,o+n-a),t.lineTo(i,o+n),t.lineTo(i,o),t.fill()}clear(t){const e=this.brick.physics.rectangle,s=e.corners.topLeft,i=s.x,o=s.y,r=e.width,n=e.height;t.clearRect(i,o,r,n)}}function y(t,e){if(t>0)return t;throw new TypeError(e+" must be a number greater than zero: "+t+" ("+typeof t+")")}function f(t,e){if(t>=0)return t;throw new TypeError(e+" must be a number greater than or equal to zero: "+t+" ("+typeof t+")")}class m{constructor(t,e){this._x=0,this._y=0,this.x=t,this.y=e}get x(){return this._x}set x(t){this._x=f(t,"x")}get y(){return this._y}set y(t){this._y=f(t,"y")}clone(){return new m(this.x,this.y)}}class v{constructor(t,e,s){this._length=0,this._start=t.clone(),this.length=e,this._orientation=s}get start(){return this._start}set start(t){this._start=t.clone()}get length(){return this._length}set length(t){this._length=y(t,"length")}get orientation(){return this._orientation}set orientation(t){this._orientation=t}clone(){return new v(this.start,this.length,this.orientation)}}var _;(function(t){t["Horizontal"]="Horizontal",t["Vertical"]="Vertical"})(_||(_={}));const b=_.Horizontal,w=_.Vertical;class x{constructor(t,e,s){this._width=0,this._height=0,this._topLeft=t.clone(),this._width=y(e,"width"),this._height=y(s,"height"),this._corners=new L(this,this._topLeft),this._edges=new k(this)}get width(){return this._width}get height(){return this._height}get corners(){return this._corners}get edges(){return this._edges}moveTo(t,e){this._topLeft.x=t,this._topLeft.y=e,this._corners.update(),this._edges.update()}resize(t,e){this._width=y(t,"width"),this._height=y(e,"height"),this._corners.update(),this._edges.update()}clone(){return new x(this._topLeft,this._width,this._height)}}class L{constructor(t,e){this._rectangle=t,this._topLeft=e,this._topRight=new m(e.x+t.width,e.y),this._bottomLeft=new m(e.x,e.y+t.height),this._bottomRight=new m(e.x+t.width,e.y+t.height)}update(){this._topRight.x=this._topLeft.x+this._rectangle.width,this._topRight.y=this._topLeft.y,this._bottomLeft.x=this._topLeft.x,this._bottomLeft.y=this._topLeft.y+this._rectangle.height,this._bottomRight.x=this._topLeft.x+this._rectangle.width,this._bottomRight.y=this._topLeft.y+this._rectangle.height}get topLeft(){return this._topLeft}get topRight(){return this._topRight}get bottomLeft(){return this._bottomLeft}get bottomRight(){return this._bottomRight}}class k{constructor(t){this._rectangle=t;const e=t.corners,s=e.topLeft,i=e.topRight,o=e.bottomLeft,r=t.width,n=t.height;this._top=new v(s,r,b),this._bottom=new v(o,r,b),this._left=new v(s,n,w),this._right=new v(i,n,w)}update(){const t=this._rectangle.corners,e=t.topLeft,s=t.topRight,i=t.bottomLeft,o=this._rectangle,r=o.width,n=o.height;this._top.start.x=e.x,this._top.start.y=e.y,this._top.length=r,this._bottom.start.x=i.x,this._bottom.start.y=i.y,this._bottom.length=r,this._left.start.x=e.x,this._left.start.y=e.y,this._left.length=n,this._right.start.x=s.x,this._right.start.y=s.y,this._right.length=n}get top(){return this._top}get bottom(){return this._bottom}get left(){return this._left}get right(){return this._right}}const B=40,T=20;class P{constructor(t,e){const s=new m(e*B,t*T);this.rectangle=new x(s,B,T)}}const R=40,F=20;class M{constructor(t,e){this.physics=new P(t,e),this.graphics=new g(this),this.destroyed=!1}hitByBall(){this.destroyed=!0}}const E=18,S=14,C=S*R,O=(E+3)*F;function H(){const t=[];for(let e=0;e<E;e++){t.push([]);for(let s=0;s<S;s++)t[e].push(null)}return t}class j{constructor(t,e){this.state=t,this.root=e,this.launch=!1,this.moveListener=this.moveHandler.bind(this),this.clickListener=this.clickHandler.bind(this)}start(){this.root.addEventListener("mousemove",this.moveListener),this.root.addEventListener("click",this.clickListener)}pause(){this.root.removeEventListener("mousemove",this.moveListener),this.root.removeEventListener("click",this.clickListener)}moveHandler(t){this.paddlePosition=t.clientX}clickHandler(){this.launch=!0}process(){void 0!==this.paddlePosition&&this.state.paddle.controls.move(this.paddlePosition),this.launch&&(this.state.paddle.controls.launch(),this.launch=!1)}}class z{constructor(t,e){this.state=t,this.root=e,this.launch=!1,this.touchListener=this.touchHandler.bind(this)}start(){this.root.addEventListener("touchstart",this.touchListener),this.root.addEventListener("touchmove",this.touchListener),this.root.addEventListener("touchend",this.touchListener)}pause(){this.root.removeEventListener("touchstart",this.touchListener),this.root.removeEventListener("touchmove",this.touchListener),this.root.removeEventListener("touchend",this.touchListener)}touchHandler(t){const e=t.changedTouches[0];if(this.paddlePosition=e.clientX,t.preventDefault(),"touchstart"===t.type)this.startTime=performance.now();else if("touchend"===t.type&&this.startTime){const t=performance.now()-this.startTime;t<=200&&(this.launch=!0)}}process(){void 0!==this.paddlePosition&&this.state.paddle.controls.move(this.paddlePosition),this.launch&&(this.state.paddle.controls.launch(),this.launch=!1)}}class D{constructor(t,e){this.mouse=new j(t,e),this.touch=new z(t,e),this.running=!1}start(){this.running||(this.running=!0,this.mouse.start(),this.touch.start())}pause(){this.running&&(this.running=!1,this.mouse.pause(),this.touch.pause())}process(){this.mouse.process(),this.touch.process()}}s("ac6a");class A{constructor(t,e){this.state=t,this.root=this.initRoot(e),this.bricksLayer=this.createCanvas(0),this.dynamicLayer=this.createCanvas(1)}initRoot(t){return t.style.position="relative",t.style.width=C+"px",t.style.height=O+"px",t.style.backgroundColor="#E0F2F1",t}createCanvas(t){const e=document.createElement("canvas"),s=window.devicePixelRatio||1;e.width=C*s,e.height=O*s,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width=C+"px",e.style.height=O+"px",e.style.zIndex=t+"",this.root.appendChild(e);const i=e.getContext("2d");if(i)return i.scale(s,s),i;throw new TypeError("Could not initialize rendering context.")}pause(){this.framesThisSecond=void 0,this.lastFpsUpdate=void 0}render(t){this.calculateFps(t),this.renderBricks(),this.clearDynamicLayer(),this.renderPaddle(),this.renderBalls(),this.renderFps()}calculateFps(t){this.lastFpsUpdate||(this.lastFpsUpdate=t),t>this.lastFpsUpdate+1e3&&(this.fps=this.framesThisSecond,this.lastFpsUpdate=t,this.framesThisSecond=0),this.framesThisSecond||(this.framesThisSecond=0),this.framesThisSecond++}renderBricks(){for(let t of this.state.bricks)for(let e of t)e&&e.graphics.render(this.bricksLayer)}clearDynamicLayer(){this.dynamicLayer.clearRect(0,0,C,O)}renderPaddle(){this.state.paddle.graphics.render(this.dynamicLayer)}renderBalls(){this.state.balls.forEach(t=>{t.graphics.render(this.dynamicLayer)})}renderFps(){this.fps&&(this.dynamicLayer.strokeStyle="#000000",this.dynamicLayer.textAlign="right",this.dynamicLayer.fillText(Math.round(this.fps)+" FPS",C-15,25))}}const I=1e3/60;class V{constructor(t){this.state=t,this.delta=0}pause(t){this.lastTimestamp&&(this.delta+=t-this.lastTimestamp,this.lastTimestamp=void 0)}calculate(t){this.lastTimestamp||(this.lastTimestamp=t),this.delta+=t-this.lastTimestamp,this.lastTimestamp=t;while(this.delta>=I)this.step(),this.delta-=I}step(){for(let t of this.state.balls)t.physics.step(this.state)}}class U{constructor(t){this.ball=t}render(t){const e=this.ball.physics.circle,s=e.center,i=e.radius;t.fillStyle="#000000",t.beginPath(),t.arc(s.x,s.y,i,0,2*Math.PI),t.fill()}}const $=_.Horizontal,q=_.Vertical;var G=function(t,e){const s=[t.center.x-e.start.x,t.center.y-e.start.y],i=[e.orientation===$?e.length:0,e.orientation===q?e.length:0],o=J(i,i),r=J(s,i),n=X(r/o,0,1),h=[i[0]*n+e.start.x-t.center.x,i[1]*n+e.start.y-t.center.y],c=J(h,h);return c<=t.radius*t.radius};function J(t,e){return t[0]*e[0]+t[1]*e[1]}function X(t,e,s){return Math.max(e,Math.min(s,t))}var W,K=function(t,e){const s=e.corners.topLeft.x,i=s+e.width,o=e.corners.topLeft.y,r=o+e.height,n=t.x,h=t.y;return n>=s&&n<=i&&h>=o&&h<=r};(function(t){t["Top"]="Top",t["Bottom"]="Bottom",t["Left"]="Left",t["Right"]="Right",t["Enclosed"]="Enclosed"})(W||(W={}));var N=function(t,e){let s=null;return G(t,e.edges.top)&&(s=Q(W.Top,s)),G(t,e.edges.right)&&(s=Q(W.Right,s)),G(t,e.edges.bottom)&&(s=Q(W.Bottom,s)),G(t,e.edges.left)&&(s=Q(W.Left,s)),!s&&K(t.center,e)&&(s=Q(W.Enclosed,s)),s};function Q(t,e){return e?(e.push(t),e):[t]}class Y{constructor(t,e){this._radius=0,this._center=t.clone(),this.radius=e}get center(){return this._center}set center(t){this._center=t.clone()}get radius(){return this._radius}set radius(t){this._radius=y(t,"radius")}clone(){return new Y(this.center,this.radius)}}const Z=7,tt=Z,et=C-Z,st=Z,it=O-Z,ot=5,rt=Math.PI/3;class nt{constructor(t){this.ball=t,this.circle=new Y(new m(0,0),Z),this.velocity=[0,0]}step(t){this.move(),this.checkPaddleCollision(t.paddle),this.checkBricksCollision(t.bricks),this.checkBoundsCollision()}move(){this.circle.center.x+=this.velocity[0],this.circle.center.y+=this.velocity[1]}checkPaddleCollision(t){if(t.balls.includes(this.ball))return;const e=N(this.circle,t.physics.rectangle);if(!e)return;const s=t.physics.rectangle.edges,i=s.right,o=s.bottom,r=s.left;e.includes(W.Top)?this.paddleCollisionFromAbove(t):e.includes(W.Right)?this.collisionFromRight(i.start.x):e.includes(W.Left)?this.collisionFromLeft(r.start.x):e.includes(W.Bottom)&&this.collisionFromBelow(o.start.y)}paddleCollisionFromAbove(t){this.updateVelocityBasedOnPaddlePosition(t),this.collisionFromAbove(t.physics.rectangle.edges.top.start.y)}updateVelocityBasedOnPaddlePosition(t){const e=t.physics.rectangle.edges.top.start.x,s=t.physics.rectangle.width,i=s/2,o=Math.max(e,Math.min(e+s,this.circle.center.x)),r=e+i-o,n=r/i,h=n*rt;this.velocity[0]=-Math.sin(h)*ot,this.velocity[1]=-Math.cos(h)*ot}checkBricksCollision(t){const e=Math.round(this.circle.center.y/F),s=Math.max(0,e-1),i=Math.min(E-1,e+1);for(let o=s;o<=i;o++)this.checkBrickRow(t[o])}checkBrickRow(t){const e=Math.round(this.circle.center.x/R),s=Math.max(0,e-1),i=Math.min(S-1,e+1);for(let o=s;o<=i;o++)this.checkBrickCell(t,o)}checkBrickCell(t,e){const s=t[e];s&&!s.destroyed&&this.checkBrickCollision(s)}checkBrickCollision(t){const e=N(this.circle,t.physics.rectangle);if(!e)return;t.hitByBall();const s=t.physics.rectangle.edges,i=s.top,o=s.right,r=s.bottom,n=s.left;e.includes(W.Top)&&this.collisionFromAbove(i.start.y),e.includes(W.Right)&&this.collisionFromRight(o.start.x),e.includes(W.Bottom)&&this.collisionFromBelow(r.start.y),e.includes(W.Left)&&this.collisionFromLeft(n.start.x)}checkBoundsCollision(){const t=this.circle,e=t.center,s=t.radius;e.y-s<=0&&this.collisionFromBelow(0),e.x+s>=C&&this.collisionFromLeft(C),e.x-s<=0&&this.collisionFromRight(0),e.y-s>=O&&(this.ball.dropped=!0)}collisionFromAbove(t){this.circle.center.y=Math.max(t-this.circle.radius,st),this.velocity[1]>0&&(this.velocity[1]=-this.velocity[1])}collisionFromRight(t){this.circle.center.x=Math.min(t+this.circle.radius,et),this.velocity[0]<0&&(this.velocity[0]=-this.velocity[0])}collisionFromBelow(t){this.circle.center.y=Math.min(t+this.circle.radius,it),this.velocity[1]<0&&(this.velocity[1]=-this.velocity[1])}collisionFromLeft(t){this.circle.center.x=Math.max(t-this.circle.radius,tt),this.velocity[0]>0&&(this.velocity[0]=-this.velocity[0])}}class ht{constructor(){this.physics=new nt(this),this.graphics=new U(this),this.dropped=!1}}class ct{constructor(t){this.state=t,this.createBall()}createBall(){const t=new ht;this.state.balls.push(t),this.state.paddle.stick(t,!0)}process(){this.handleDroppedBalls()}handleDroppedBalls(){this.state.balls=this.state.balls.filter(t=>!t.dropped),0===this.state.balls.length&&this.createBall()}}class lt{constructor(t,e){this.state=t,this.controls=new D(this.state,e),this.physics=new V(this.state),this.game=new ct(this.state),this.graphics=new A(this.state,e),this.running=!1}start(){this.running||(this.running=!0,this.controls.start(),requestAnimationFrame(this.loop.bind(this)))}pause(){this.running&&(this.running=!1,this.controls.pause(),this.physics.pause(performance.now()),this.graphics.pause())}loop(t){this.running&&(this.controls.process(),this.physics.calculate(t),this.game.process(),this.graphics.render(t),requestAnimationFrame(this.loop.bind(this)))}}const at=60,dt=F,ut=at/2;class pt{constructor(){const t=C/2-ut,e=O-2*dt;this.rectangle=new x(new m(t,e),at,dt)}}const gt=at/2,yt=0,ft=C-at;class mt{constructor(t){this.paddle=t}move(t){const e=this.updatePaddlePosition(t);this.updateBallPositions(e)}updatePaddlePosition(t){const e=this.paddle.physics.rectangle,s=e.corners.topLeft,i=Math.min(ft,Math.max(yt,t-gt)),o=i-s.x;return e.moveTo(i,s.y),o}updateBallPositions(t){for(let e of this.paddle.balls)this.updateBallPosition(e,t)}updateBallPosition(t,e){const s=t.physics.circle.center.x,i=Math.min(et,Math.max(tt,s+e));t.physics.circle.center.x=i}launch(){if(0!==this.paddle.balls.length){for(let t of this.paddle.balls)t.physics.updateVelocityBasedOnPaddlePosition(this.paddle);this.paddle.balls=[]}}}class vt{constructor(t){this.paddle=t}render(t){const e=this.paddle.physics.rectangle,s=e.corners.topLeft,i=s.x,o=s.y,r=e.width,n=e.height;t.fillStyle="#424242",t.fillRect(i,o,r,n)}}class _t{constructor(){this.balls=[],this.physics=new pt,this.graphics=new vt(this),this.controls=new mt(this)}stick(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.balls.push(t),e?this.stickBallRandomly(t):this.stickBallBasedOnPosition(t),t.physics.circle.center.y=this.physics.rectangle.edges.top.start.y-Z,t.physics.velocity[0]=0,t.physics.velocity[1]=0}stickBallRandomly(t){const e=this.physics.rectangle.corners.topLeft.x,s=this.physics.rectangle.width;let i,o;Math.random()>=.5?(i=e+1/12*s,o=e+2/6*s):(i=e+s-2/6*s,o=e+s-1/12*s),t.physics.circle.center.x=Math.random()*(o-i)+i}stickBallBasedOnPosition(t){const e=this.physics.rectangle.corners,s=e.topLeft,i=e.topRight,o=t.physics.circle.center.x;t.physics.circle.center.x=Math.min(i.x,Math.max(s.x,o))}}class bt{constructor(){this.bricks=H(),this.balls=[],this.paddle=new _t}}var wt={data:()=>({FIELD_WIDTH:C,FIELD_HEIGHT:O}),mounted(){document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.loop.pause()});const t=new bt;for(let e=3;e<11;e++)for(let s=0;s<14;s++)t.bricks[e][s]=new M(e,s);this.loop=new lt(t,this.$refs.root),this.loop.start()},beforeDestroy(){this.visibilityListener&&document.removeEventListener(visibilityListener)},methods:{pause(){this.loop&&(this.loop.running?this.loop.pause():this.loop.start())}}},xt=wt,Lt=(s("d88d"),s("2877")),kt=Object(Lt["a"])(xt,n,h,!1,null,"0898585d",null),Bt=kt.exports,Tt={components:{Game:Bt}},Pt=Tt,Rt=(s("034f"),Object(Lt["a"])(Pt,o,r,!1,null,null,null)),Ft=Rt.exports;i["a"].config.productionTip=!1,new i["a"]({render:t=>t(Ft)}).$mount("#app")},d88d:function(t,e,s){"use strict";var i=s("7206"),o=s.n(i);o.a}});