(function(t){function e(e){for(var s,n,h=e[0],c=e[1],l=e[2],u=0,p=[];u<h.length;u++)n=h[u],r[n]&&p.push(r[n][0]),r[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);a&&a(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,h=1;h<i.length;h++){var c=i[h];0!==r[c]&&(s=!1)}s&&(o.splice(e--,1),t=n(n.s=i[0]))}return t}var s={},r={app:0},o=[];function n(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/breakout/";var h=window["webpackJsonp"]=window["webpackJsonp"]||[],c=h.push.bind(h);h.push=e,h=h.slice();for(var l=0;l<h.length;l++)e(h[l]);var a=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},cd49:function(t,e,i){"use strict";i.r(e);var s,r=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Game")],1)},n=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"root"}),i("p",[i("button",{on:{click:t.pause}},[t._v("Pause / Resume")])])])},c=[];i("ac6a");function l(t,e){if(t>0)return t;throw new TypeError(e+" must be a number greater than zero: "+t+" ("+typeof t+")")}function a(t,e){if(t>=0)return t;throw new TypeError(e+" must be a number greater than or equal to zero: "+t+" ("+typeof t+")")}class u{constructor(t,e){this._x=0,this._y=0,this.x=t,this.y=e}get x(){return this._x}set x(t){this._x=a(t,"x")}get y(){return this._y}set y(t){this._y=a(t,"y")}clone(){return new u(this.x,this.y)}}class p{constructor(t,e,i){this._length=0,this._start=t.clone(),this.length=e,this._orientation=i}get start(){return this._start}set start(t){this._start=t.clone()}get length(){return this._length}set length(t){this._length=l(t,"length")}get orientation(){return this._orientation}set orientation(t){this._orientation=t}clone(){return new p(this.start,this.length,this.orientation)}}(function(t){t["Horizontal"]="Horizontal",t["Vertical"]="Vertical"})(s||(s={}));const d=s.Horizontal,f=s.Vertical;class g{constructor(t,e,i){this._width=0,this._height=0,this._topLeft=t.clone(),this._width=l(e,"width"),this._height=l(i,"height"),this._corners=new _(this,this._topLeft),this._edges=new y(this)}get width(){return this._width}get height(){return this._height}get corners(){return this._corners}get edges(){return this._edges}moveTo(t,e){this._topLeft.x=t,this._topLeft.y=e,this._corners.update(),this._edges.update()}resize(t,e){this._width=l(t,"width"),this._height=l(e,"height"),this._corners.update(),this._edges.update()}clone(){return new g(this._topLeft,this._width,this._height)}}class _{constructor(t,e){this._rectangle=t,this._topLeft=e,this._topRight=new u(e.x+t.width,e.y),this._bottomLeft=new u(e.x,e.y+t.height),this._bottomRight=new u(e.x+t.width,e.y+t.height)}update(){this._topRight.x=this._topLeft.x+this._rectangle.width,this._topRight.y=this._topLeft.y,this._bottomLeft.x=this._topLeft.x,this._bottomLeft.y=this._topLeft.y+this._rectangle.height,this._bottomRight.x=this._topLeft.x+this._rectangle.width,this._bottomRight.y=this._topLeft.y+this._rectangle.height}get topLeft(){return this._topLeft}get topRight(){return this._topRight}get bottomLeft(){return this._bottomLeft}get bottomRight(){return this._bottomRight}}class y{constructor(t){this._rectangle=t;const e=t.corners,i=e.topLeft,s=e.topRight,r=e.bottomLeft,o=t.width,n=t.height;this._top=new p(i,o,d),this._bottom=new p(r,o,d),this._left=new p(i,n,f),this._right=new p(s,n,f)}update(){const t=this._rectangle.corners,e=t.topLeft,i=t.topRight,s=t.bottomLeft,r=this._rectangle,o=r.width,n=r.height;this._top.start.x=e.x,this._top.start.y=e.y,this._top.length=o,this._bottom.start.x=s.x,this._bottom.start.y=s.y,this._bottom.length=o,this._left.start.x=e.x,this._left.start.y=e.y,this._left.length=n,this._right.start.x=i.x,this._right.start.y=i.y,this._right.length=n}get top(){return this._top}get bottom(){return this._bottom}get left(){return this._left}get right(){return this._right}}const m=40,x=20;class b{constructor(t,e){const i=new u(e*m,t*x);this.rectangle=new g(i,m,x),this.destroyed=!1}hitByBall(){this.destroyed=!0}}const v=18,w=14,L=w*m,F=(v+3)*x;function T(){const t=[];for(let e=0;e<v;e++){t.push([]);for(let i=0;i<w;i++)t[e].push(null)}return t}class R{constructor(t){this.root=t,this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",L+""),this.canvas.setAttribute("height",F+""),this.context=this.initRenderingContext(),this.root.appendChild(this.canvas)}initRenderingContext(){const t=this.canvas.getContext("2d");if(t)return t;throw new TypeError("Could not initialize rendering context.")}render(t,e){this.renderBackground(),this.renderBricks(t),this.renderBalls(t),this.renderFps(e)}renderBackground(){this.context.fillStyle="#E0F2F1",this.context.fillRect(0,0,L,F)}renderBricks(t){for(let e of t.bricks)for(let t of e){if(!t)continue;const e=t.rectangle,i=this.context.createLinearGradient(e.corners.topLeft.x,e.corners.topLeft.y,e.corners.topLeft.x+e.width,e.corners.topLeft.y+e.height);i.addColorStop(0,"#004D40"),i.addColorStop(1,"#4DB6AC"),this.context.fillStyle=i,this.context.fillRect(e.corners.topLeft.x,e.corners.topLeft.y,e.width,e.height)}}renderBalls(t){t.balls.forEach(t=>{const e=t.circle;this.context.fillStyle="#000000",this.context.beginPath(),this.context.arc(e.center.x,e.center.y,e.radius,0,2*Math.PI),this.context.fill()})}renderFps(t){t&&(this.context.strokeStyle="#000000",this.context.textAlign="right",this.context.fillText(Math.round(t)+" FPS",L-15,25))}}const B=1e3/60;class S{constructor(t,e){this.state=t,this.graphics=new R(e),this.running=!1,this.delta=0}start(){this.running=!0,requestAnimationFrame(this.loop.bind(this))}pause(){this.running&&(this.running=!1,this.framesThisSecond=void 0,this.lastFpsUpdate=void 0,this.lastTimestamp&&(this.delta+=performance.now()-this.lastTimestamp,this.lastTimestamp=void 0))}loop(t){this.running&&(this.calculateFps(t),this.physics(t),this.graphics.render(this.state,this.fps),requestAnimationFrame(this.loop.bind(this)))}calculateFps(t){this.lastFpsUpdate||(this.lastFpsUpdate=t),t>this.lastFpsUpdate+1e3&&(this.fps=this.framesThisSecond,this.lastFpsUpdate=t,this.framesThisSecond=0),this.framesThisSecond||(this.framesThisSecond=0),this.framesThisSecond++}physics(t){this.lastTimestamp||(this.lastTimestamp=t),this.delta+=t-this.lastTimestamp,this.lastTimestamp=t;while(this.delta>=B)this.physicsStep(),this.delta-=B}physicsStep(){const t=this.state,e=t.balls,i=t.bricks;e.forEach(t=>{t.move();const e=Math.round(t.circle.center.y/x),s=Math.max(0,e-1),r=Math.min(17,e+1);for(let o=s;o<=r;o++){const e=i[o];for(let i=0;i<e.length;i++){const s=e[i];s&&(t.checkBrickCollision(s),s.destroyed&&(e[i]=null))}}t.checkBoundsCollision(L,F)})}}class k{constructor(){this.bricks=T(),this.balls=[]}}class E{constructor(t,e){this._radius=0,this._center=t.clone(),this.radius=e}get center(){return this._center}set center(t){this._center=t.clone()}get radius(){return this._radius}set radius(t){this._radius=l(t,"radius")}clone(){return new E(this.center,this.radius)}}const C=s.Horizontal,M=s.Vertical;var O=function(t,e){const i=[t.center.x-e.start.x,t.center.y-e.start.y],s=[e.orientation===C?e.length:0,e.orientation===M?e.length:0],r=j(s,s),o=j(i,s),n=P(o/r,0,1),h=[s[0]*n+e.start.x-t.center.x,s[1]*n+e.start.y-t.center.y],c=j(h,h);return c<=t.radius*t.radius};function j(t,e){return t[0]*e[0]+t[1]*e[1]}function P(t,e,i){return Math.max(e,Math.min(i,t))}var A,z=function(t,e){const i=e.corners.topLeft.x,s=i+e.width,r=e.corners.topLeft.y,o=r+e.height,n=t.x,h=t.y;return n>=i&&n<=s&&h>=r&&h<=o};(function(t){t["Top"]="Top",t["Bottom"]="Bottom",t["Left"]="Left",t["Right"]="Right",t["Enclosed"]="Enclosed"})(A||(A={}));var H=function(t,e){let i=null;return O(t,e.edges.top)&&(i=D(A.Top,i)),O(t,e.edges.right)&&(i=D(A.Right,i)),O(t,e.edges.bottom)&&(i=D(A.Bottom,i)),O(t,e.edges.left)&&(i=D(A.Left,i)),!i&&z(t.center,e)&&(i=D(A.Enclosed,i)),i};function D(t,e){return e?(e.push(t),e):[t]}const I=5;class U{constructor(t){this.circle=new E(t,I),this.velocity=[0,0],this.debug=[[this.circle.center.x,this.circle.center.y]]}move(){this.circle.center.x+=this.velocity[0],this.circle.center.y+=this.velocity[1]}checkBoundsCollision(t,e){const i=this.circle,s=i.center,r=i.radius;s.y-r<=0&&this.collisionFromBelow(0),s.x+r>=t&&this.collisionFromLeft(t),s.y+r>=e&&this.collisionFromAbove(e),s.x-r<=0&&this.collisionFromRight(0)}checkBrickCollision(t){const e=H(this.circle,t.rectangle);if(!e)return;t.hitByBall();const i=t.rectangle.edges,s=i.top,r=i.right,o=i.bottom,n=i.left;e.includes(A.Top)&&this.collisionFromAbove(s.start.y),e.includes(A.Right)&&this.collisionFromRight(r.start.x),e.includes(A.Bottom)&&this.collisionFromBelow(o.start.y),e.includes(A.Left)&&this.collisionFromLeft(n.start.x)}collisionFromAbove(t){this.circle.center.y=t-this.circle.radius,this.velocity[1]>0&&(this.velocity[1]=-this.velocity[1])}collisionFromRight(t){this.circle.center.x=t+this.circle.radius,this.velocity[0]<0&&(this.velocity[0]=-this.velocity[0])}collisionFromBelow(t){this.circle.center.y=t+this.circle.radius,this.velocity[1]<0&&(this.velocity[1]=-this.velocity[1])}collisionFromLeft(t){this.circle.center.x=t-this.circle.radius,this.velocity[0]>0&&(this.velocity[0]=-this.velocity[0])}}var G={data:()=>({FIELD_WIDTH:L,FIELD_HEIGHT:F}),mounted(){document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.loop.pause()});const t=new k,e=new U(new u(280,400));e.velocity[0]=3,e.velocity[1]=-3,t.balls.push(e);for(let i=3;i<11;i++)for(let e=0;e<14;e++)t.bricks[i][e]=new b(i,e);this.loop=new S(t,this.$refs.root),this.loop.start()},beforeDestroy(){this.visibilityListener&&document.removeEventListener(visibilityListener)},methods:{pause(){this.loop&&(this.loop.running?this.loop.pause():this.loop.start())}}},V=G,$=i("2877"),q=Object($["a"])(V,h,c,!1,null,null,null),J=q.exports,W={components:{Game:J}},K=W,N=Object($["a"])(K,o,n,!1,null,null,null),Q=N.exports;r["a"].config.productionTip=!1,new r["a"]({render:t=>t(Q)}).$mount("#app")}});